(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1764:function(e,t,r){Promise.resolve().then(r.bind(r,966))},966:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var a=r(7437),s=r(2265),n=r(7053),o=r(535),c=r(1994),i=r(3335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,c.W)(t))}let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...i}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:l(d({variant:s,size:o,className:r})),ref:t,...i})});u.displayName="Button";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});x.displayName="Card";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("flex flex-col space-y-1.5 p-6",r),...s})});g.displayName="CardHeader";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("text-2xl font-semibold leading-none tracking-tight",r),...s})});h.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("p-6 pt-0",r),...s})});m.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";let f=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:l(f({variant:r}),t),...s})}var v=r(1436),y=r(4350),b=r(6940),j=r(7059),w=r(2994),N=r(3299),D=r(4765),S=r(4565),C=r(6933);let k={light:"",dark:".dark"},I=s.createContext(null);function A(){let e=s.useContext(I);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let R=s.forwardRef((e,t)=>{let{id:r,className:n,children:o,config:c,...i}=e,d=s.useId(),u="chart-".concat(r||d.replace(/:/g,""));return(0,a.jsx)(I.Provider,{value:{config:c},children:(0,a.jsxs)("div",{"data-chart":u,ref:t,className:l("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...i,children:[(0,a.jsx)(T,{id:u,config:c}),(0,a.jsx)(v.h,{children:o})]})})});R.displayName="Chart";let T=e=>{let{id:t,config:r}=e,s=Object.entries(r).filter(e=>{let[t,r]=e;return r.theme||r.color});return s.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(k).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[a,s]=e,n=(null===(t=s.theme)||void 0===t?void 0:t[r])||s.color;return n?"  --color-".concat(a,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},E=S.u,Z=s.forwardRef((e,t)=>{let{active:r,payload:n,className:o,indicator:c="dot",hideLabel:i=!1,hideIndicator:d=!1,label:u,labelFormatter:x,labelClassName:g,formatter:h,color:m,nameKey:f,labelKey:p}=e,{config:v}=A(),y=s.useMemo(()=>{var e;if(i||!(null==n?void 0:n.length))return null;let[t]=n,r="".concat(p||t.dataKey||t.name||"value"),s=_(v,t,r),o=p||"string"!=typeof u?null==s?void 0:s.label:(null===(e=v[u])||void 0===e?void 0:e.label)||u;return x?(0,a.jsx)("div",{className:l("font-medium",g),children:x(o,n)}):o?(0,a.jsx)("div",{className:l("font-medium",g),children:o}):null},[u,x,n,i,g,v,p]);if(!r||!(null==n?void 0:n.length))return null;let b=1===n.length&&"dot"!==c;return(0,a.jsxs)("div",{ref:t,className:l("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",o),children:[b?null:y,(0,a.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let r="".concat(f||e.name||e.dataKey||"value"),s=_(v,e,r),n=m||e.payload.fill||e.color;return(0,a.jsx)("div",{className:l("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===c&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==s?void 0:s.icon)?(0,a.jsx)(s.icon,{}):!d&&(0,a.jsx)("div",{className:l("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===c,"w-1":"line"===c,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===c,"my-0.5":b&&"dashed"===c}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:l("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[b?y:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function _(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=r;return r in t&&"string"==typeof t[r]?s=t[r]:a&&r in a&&"string"==typeof a[r]&&(s=a[r]),s in e?e[s]:e[r]}Z.displayName="ChartTooltip",C.D,s.forwardRef((e,t)=>{let{className:r,hideIcon:s=!1,payload:n,verticalAlign:o="bottom",nameKey:c}=e,{config:i}=A();return(null==n?void 0:n.length)?(0,a.jsx)("div",{ref:t,className:l("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",r),children:n.map(e=>{let t="".concat(c||e.dataKey||"value"),r=_(i,e,t);return(0,a.jsxs)("div",{className:"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground",children:[(null==r?void 0:r.icon)&&!s?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend";var F=r(2926),P=r(5395),L=r(3651),U=r(6865),G=r(3247),W=r(2735);let X=(0,o.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Y=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:l(X({variant:s}),r),...n})});Y.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:l("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let B=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:l("text-sm [&_p]:leading-relaxed",r),...s})});B.displayName="AlertDescription";var K=r(9862);let O=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(K.fC,{className:l("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(K.bU,{className:"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"})})});O.displayName=K.fC.displayName;var z=r(6394);let M=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),H=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(z.f,{ref:t,className:l(M(),r),...s})});function q(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[i,l]=(0,s.useState)(null),[d,f]=(0,s.useState)(null),[S,C]=(0,s.useState)(""),[k,I]=(0,s.useState)(!0),[A,T]=(0,s.useState)(!0),[_,X]=(0,s.useState)([]),[K,z]=(0,s.useState)(!1),[M,q]=(0,s.useState)(!1),[V,J]=(0,s.useState)(null),[Q,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!0),[er,ea]=(0,s.useState)(0),[es,en]=(0,s.useState)([]),[eo,ec]=(0,s.useState)([]),[ei,el]=(0,s.useState)({totalSamples:0,samplingRate:0,duration:0,packetsPerSecond:0}),[ed,eu]=(0,s.useState)({}),[ex,eg]=(0,s.useState)({}),[eh,em]=(0,s.useState)({}),[ef,ep]=(0,s.useState)({}),ev=(0,s.useRef)([]),ey=(0,s.useRef)(Date.now()),eb=(0,s.useRef)(0),ej=(0,s.useRef)(0),ew=(0,s.useRef)(0),eN=(0,s.useRef)(Date.now()),eD=(0,s.useRef)(0),eS=(0,s.useRef)(null),eC="006e4000-01b5-a3f3-93e0-a9e50e24dcca",ek="006e4000-02b5-a3f3-93e0-a9e50e24dcca";(0,s.useEffect)(()=>{console.log("=== CYCLOWATT DATA LOGGER INITIALIZED ==="),console.log("Target Service UUID:",eC),console.log("Target Characteristic UUID:",ek),console.log("Expected Data Format: 8x int32 (Force, AccelX, AccelY, AccelZ, GyroX, GyroY, GyroZ, Power)"),console.log("User Agent:",navigator.userAgent),console.log("Is Secure Context:",window.isSecureContext),console.log("Protocol:",window.location.protocol),T(window.isSecureContext),navigator.bluetooth?(console.log("Web Bluetooth API is supported"),I(!0)):(console.error("Web Bluetooth API not supported"),I(!1),C("Web Bluetooth API is not supported in this browser. Please use Chrome, Edge, or Opera.")),"serial"in navigator?(console.log("Web Serial API is supported"),et(!0)):(console.error("Web Serial API not supported"),et(!1)),window.isSecureContext||(console.error("Not in secure context"),C("Bluetooth and Serial require HTTPS. Please access this page via HTTPS or localhost."))},[]);let eI={force:{label:"Force (N)",color:"hsl(var(--chart-1))"},accelX:{label:"Accel X (m/s\xb2)",color:"hsl(var(--chart-2))"},accelY:{label:"Accel Y (m/s\xb2)",color:"hsl(var(--chart-3))"},accelZ:{label:"Accel Z (m/s\xb2)",color:"hsl(var(--chart-4))"},gyroX:{label:"Gyro X (\xb0/s)",color:"hsl(var(--chart-5))"},gyroY:{label:"Gyro Y (\xb0/s)",color:"hsl(220, 70%, 50%)"},gyroZ:{label:"Gyro Z (\xb0/s)",color:"hsl(280, 70%, 50%)"},power:{label:"Power (W)",color:"hsl(45, 90%, 50%)"},synchronization:{label:"Sync",color:"hsl(var(--chart-1))"}},eA=()=>{let e=Date.now(),t=[...ev.current];ec(t.slice(-500).map(e=>({time:new Date(e.timestamp).toLocaleTimeString("en-US",{hour12:!1,minute:"2-digit",second:"2-digit",fractionalSecondDigits:1}),force:Number(e.force.toFixed(3)),accelX:Number(e.accelX.toFixed(3)),accelY:Number(e.accelY.toFixed(3)),accelZ:Number(e.accelZ.toFixed(3)),gyroX:Number(e.gyroX.toFixed(3)),gyroY:Number(e.gyroY.toFixed(3)),gyroZ:Number(e.gyroZ.toFixed(3)),power:Number(e.power.toFixed(3)),synchronization:e.synchronization}))),en(t);let r=eb.current>0?(e-eb.current)/1e3:0,a=r>0?ew.current/r:0;el({totalSamples:ej.current,samplingRate:r>0?ej.current/r:0,duration:r,packetsPerSecond:a}),ey.current=e},eR=async()=>{try{if(!("serial"in navigator)){C("Web Serial API is not supported in this browser.");return}console.log("\n\uD83D\uDD0C CONNECTING TO SERIAL PORT...");let e=await navigator.serial.requestPort();await e.open({baudRate:9600}),J(e),$(!0),console.log("✅ Serial port connected"),eT(e)}catch(e){console.error("Serial connection failed:",e),C("Serial connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},eT=async e=>{try{let t=new TextDecoderStream;e.readable.pipeTo(t.writable);let r=t.readable.getReader();for(eS.current=r,console.log("\uD83D\uDCE1 Starting serial data reading...");;){let{value:e,done:t}=await r.read();if(t){console.log("\uD83D\uDCE1 Serial reader closed");break}if(e){let t=e.trim(),r=Number.parseFloat(t);isNaN(r)||(eD.current=r,ea(r),console.log("\uD83D\uDCE5 Serial data received: ".concat(r)))}}}catch(e){console.error("Serial reading error:",e),e instanceof Error&&e.message.includes("device has been lost")&&($(!1),J(null))}},eE=async()=>{try{eS.current&&(await eS.current.cancel(),eS.current=null),V&&(await V.close(),J(null)),$(!1),eD.current=0,ea(0),console.log("\uD83D\uDD0C Serial port disconnected")}catch(e){console.error("Serial disconnect error:",e)}},eZ=async()=>{try{z(!0),C(""),console.log("\n\uD83D\uDD0D SCANNING FOR BLUETOOTH DEVICES..."),console.log("Target Service UUID:",eC),console.log("UUID Filtering:",M?"ENABLED":"DISABLED");let e=M?{filters:[{name:"Cyclowatt"}],optionalServices:["generic_access","generic_attribute"]}:{acceptAllDevices:!0,optionalServices:[eC,"generic_access","generic_attribute"]},t=await navigator.bluetooth.requestDevice(e);console.log("\uD83D\uDCF1 Selected device: ".concat(t.name||"Unknown"," (").concat(t.id,")"));let r=!1;try{if(t.gatt){let e=await t.gatt.connect();console.log("✅ Connected to GATT server for scanning");try{let t=await e.getPrimaryServices();if(console.log("Found ".concat(t.length," services:")),t.forEach((e,t)=>{let a=e.uuid.toLowerCase()===eC.toLowerCase();console.log("  ".concat(t+1,". ").concat(e.uuid," ").concat(a?"⭐ TARGET SERVICE":"")),a&&(r=!0)}),r)try{let t=await e.getPrimaryService(eC),r=await t.getCharacteristics();console.log("\n\uD83D\uDCE1 Target service characteristics:"),r.forEach((e,t)=>{let r=e.uuid.toLowerCase()===ek.toLowerCase();console.log("  ".concat(t+1,". ").concat(e.uuid," ").concat(r?"\uD83C\uDFAF DATA CHARACTERISTIC":"")),console.log("     Properties:",{read:e.properties.read,write:e.properties.write,notify:e.properties.notify,indicate:e.properties.indicate})})}catch(e){console.warn("Could not examine target service characteristics:",e)}}catch(e){console.warn("Could not scan services:",e)}await e.disconnect(),console.log("\uD83D\uDD0C Disconnected after scanning")}}catch(e){console.warn("Could not connect for service scanning:",e)}let a={device:t,name:t.name||"Unknown Device",id:t.id,hasTargetService:r};X(e=>e.find(e=>e.id===t.id)?e.map(e=>e.id===t.id?a:e):[...e,a]),console.log("\n\uD83D\uDCCB Device added to list: ".concat(a.name," (Target Service: ").concat(r?"✅":"❌",")"))}catch(e){console.error("Device scan failed:",e),C("Scan failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{z(!1)}},e_=async e=>{try{C(""),console.log("\n\uD83D\uDD17 CONNECTING TO: ".concat(e.name)),console.log("Device ID: ".concat(e.id)),console.log("Has Target Service: ".concat(e.hasTargetService));let r=e.device,a=await r.gatt.connect();console.log("✅ Connected to GATT server");let s=await a.getPrimaryService(eC);console.log("✅ Found CycloWatt service:",eC);let n=await s.getCharacteristic(ek);if(console.log("✅ Found data characteristic:",ek),console.log("\uD83D\uDCCB Characteristic properties:",{broadcast:n.properties.broadcast,read:n.properties.read,writeWithoutResponse:n.properties.writeWithoutResponse,write:n.properties.write,notify:n.properties.notify,indicate:n.properties.indicate}),!n.properties.notify&&!n.properties.indicate)throw Error("Data characteristic does not support notifications");c(r),l(s),f(n),t(!0),r.addEventListener("gattserverdisconnected",eF),console.log("\uD83C\uDF89 CONNECTION SUCCESSFUL!"),console.log("\uD83D\uDE80 Ready to start data streaming..."),await eU()}catch(e){console.error("Connection failed:",e),C("Connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},eF=()=>{console.log("\uD83D\uDD0C Device disconnected"),t(!1),n(!1),c(null),l(null),f(null)},eP=async()=>{try{var e;(null==o?void 0:null===(e=o.gatt)||void 0===e?void 0:e.connected)&&await o.gatt.disconnect(),eF()}catch(e){C("Disconnect error: ".concat(e instanceof Error?e.message:"Unknown error"))}},eL=e=>{if(32!==e.byteLength)return console.warn("❌ Invalid packet size: ".concat(e.byteLength," bytes, expected 32")),null;try{let t=e.getInt32(0,!0),r=e.getInt32(4,!0),a=e.getInt32(8,!0),s=e.getInt32(12,!0),n=e.getInt32(16,!0),o=e.getInt32(20,!0),c=e.getInt32(24,!0),i=e.getInt32(28,!0),l=r/1e3,d=a/1e3,u=s/1e3,x=n/1e3,g=o/1e3,h=c/1e3,m=i/1e3,f={timestamp:Date.now(),force:t,accelX:l,accelY:d,accelZ:u,gyroX:x,gyroY:g,gyroZ:h,power:m,synchronization:eD.current},p=new Date().toISOString();return console.log("\uD83D\uDCE6 [".concat(p,"] Packet #").concat(ew.current+1)),console.log("\uD83D\uDCCA [".concat(p,"] Force=").concat(t,"N, AccelX=").concat(l,"m/s\xb2, AccelY=").concat(d,"m/s\xb2, AccelZ=").concat(u,"m/s\xb2")),console.log("\uD83D\uDD04 [".concat(p,"] GyroX=").concat(x,"\xb0/s, GyroY=").concat(g,"\xb0/s, GyroZ=").concat(h,"\xb0/s, Power=").concat(m,"W, Sync=").concat(eD.current)),console.log("\uD83D\uDD22 [".concat(p,"] Raw: ").concat(t,", ").concat(r,", ").concat(a,", ").concat(s,", ").concat(n,", ").concat(o,", ").concat(c,", ").concat(i)),f}catch(e){return console.error("❌ Error parsing data packet:",e),null}},eU=async()=>{try{if(!d)throw Error("No characteristic available for streaming");console.log("\n\uD83D\uDE80 STARTING DATA STREAMING..."),console.log("Service UUID:",eC),console.log("Characteristic UUID:",ek),d.addEventListener("characteristicvaluechanged",e=>{let t=e.target.value;if(t){ew.current++;let e=Date.now();eN.current,eN.current=e;let r=eL(t);r&&(ev.current.push(r),ej.current++,e-ey.current>100&&eA())}}),await d.startNotifications(),console.log("✅ Notifications started successfully!"),n(!0),eb.current=Date.now(),ej.current=0,ew.current=0,ev.current=[],console.log("\uD83D\uDCE1 Listening for 8x int32 data packets..."),console.log("\uD83D\uDCCB Expected format: [Force, AccelX, AccelY, AccelZ, GyroX, GyroY, GyroZ, Power] as int32 values")}catch(e){console.error("❌ Failed to start streaming:",e)}},eG=async()=>{try{d&&(await d.stopNotifications(),console.log("⏹️ Data streaming stopped")),n(!1)}catch(e){C("Failed to stop streaming: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("div",{className:"bg-black text-white shadow-lg border-b border-gray-800",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:"/logo_black.png",alt:"CycloWatt Logo",className:"h-32 w-32 object-contain"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"CycloWatt"}),(0,a.jsx)("p",{className:"text-gray-300 text-lg font-medium",children:"Bluetooth Data Streamer"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Service: ",eC]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e?(0,a.jsxs)(p,{variant:"secondary",className:"bg-green-600 text-white border-green-500 flex items-center gap-1",children:[(0,a.jsx)(F.Z,{className:"w-3 h-3"}),"Connected"]}):(0,a.jsxs)(p,{variant:"secondary",className:"bg-gray-700 text-gray-300 border-gray-600 flex items-center gap-1",children:[(0,a.jsx)(P.Z,{className:"w-3 h-3"}),"Disconnected"]}),e&&(0,a.jsx)(p,{variant:"secondary",className:"".concat(r?"bg-blue-600 text-white border-blue-500":"bg-gray-500 text-white border-gray-400"," flex items-center gap-1"),children:r?"Streaming Active":"Streaming Paused"}),Q?(0,a.jsxs)(p,{variant:"secondary",className:"bg-purple-600 text-white border-purple-500 flex items-center gap-1",children:[(0,a.jsx)(L.Z,{className:"w-3 h-3"}),"Serial Connected"]}):(0,a.jsxs)(p,{variant:"secondary",className:"bg-gray-700 text-gray-300 border-gray-600 flex items-center gap-1",children:[(0,a.jsx)(L.Z,{className:"w-3 h-3"}),"Serial Disconnected"]})]})]})})}),(0,a.jsxs)("div",{className:"w-full p-6 space-y-6",children:[(!k||!A||!ee)&&(0,a.jsxs)(Y,{variant:"destructive",className:"bg-red-50 border-red-200 text-red-800",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsxs)(B,{children:[!k&&"Web Bluetooth API is not supported in this browser. ",!ee&&"Web Serial API is not supported in this browser. ",!A&&"Bluetooth and Serial require HTTPS or localhost. ","Please use Chrome, Edge, or Opera and ensure you're on HTTPS or localhost."]})]}),S&&(0,a.jsx)(Y,{variant:"destructive",className:"bg-red-50 border-red-200 text-red-800",children:(0,a.jsx)(B,{children:S})}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsx)(g,{children:(0,a.jsxs)(h,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5"}),"Serial Synchronization Input"]})}),(0,a.jsx)(m,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[Q?(0,a.jsx)(u,{onClick:eE,variant:"outline",children:"Disconnect Serial"}):(0,a.jsx)(u,{onClick:eR,disabled:!ee||!A,variant:"outline",children:"Connect Serial Port"}),Q&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium",children:"Serial Port Connected"}),(0,a.jsxs)("div",{children:["Latest Value: ",er]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"This value is logged with each Bluetooth data packet"})]})]})})]}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsx)(g,{children:(0,a.jsxs)(h,{className:"flex items-center gap-2",children:[(0,a.jsx)(G.Z,{className:"w-5 h-5"}),"Device Discovery"]})}),(0,a.jsxs)(m,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsx)(O,{id:"uuid-filter",checked:M,onCheckedChange:q,disabled:e}),(0,a.jsxs)(H,{htmlFor:"uuid-filter",className:"cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:"Filter by CycloWatt Service UUID"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:M?"Only devices advertising the CycloWatt service will appear":"All Bluetooth devices will appear in the scan"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u,{onClick:eZ,disabled:!k||!A||K||e,children:K?"Scanning...":"Scan for Devices"}),e&&(0,a.jsx)(u,{variant:"outline",onClick:eP,children:"Disconnect"})]}),e&&(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[r?(0,a.jsx)(u,{onClick:eG,variant:"destructive",children:"Stop Streaming"}):(0,a.jsx)(u,{onClick:eU,variant:"default",children:"Start Streaming"}),(0,a.jsxs)(u,{onClick:()=>{if(0===es.length)return;let e=new Blob([["timestamp,force,accelX,accelY,accelZ,gyro_x,gyro_y,gyro_z,power,synchronization",...es.map(e=>[new Date(e.timestamp).toISOString(),e.force,e.accelX,e.accelY,e.accelZ,e.gyroX,e.gyroY,e.gyroZ,e.power,e.synchronization].join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="cyclowatt_data_".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},disabled:0===es.length,className:"flex items-center gap-2",children:[(0,a.jsx)(W.Z,{className:"w-4 h-4"}),"Export to CSV (",es.length.toLocaleString()," samples)"]})]}),_.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Available Devices:"}),(0,a.jsx)("div",{className:"grid gap-2",children:_.map(t=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:t.name}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t.id})]}),t.hasTargetService&&(0,a.jsx)(p,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-300",children:"✅ Compatible"})]}),(0,a.jsx)(u,{size:"sm",onClick:()=>e_(t),disabled:e,variant:t.hasTargetService?"default":"outline",children:"Connect"})]},t.id))})]}),e&&(0,a.jsxs)("div",{className:"text-sm text-gray-600 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Connected to: ",(null==o?void 0:o.name)||"Unknown Device"]}),(0,a.jsxs)("div",{children:["Service: ",eC]}),(0,a.jsxs)("div",{children:["Characteristic: ",ek]}),(0,a.jsx)("div",{children:"Data Format: 7x int32 (Force, AccelX, AccelY, AccelZ, GyroX, GyroY, GyroZ)"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(x,{className:"bg-white border-gray-200",children:(0,a.jsxs)(m,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:ei.totalSamples.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Total Samples"})]})}),(0,a.jsx)(x,{className:"bg-white border-gray-200",children:(0,a.jsxs)(m,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[ei.samplingRate.toFixed(1)," Hz"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Sampling Rate"})]})}),(0,a.jsx)(x,{className:"bg-white border-gray-200",children:(0,a.jsxs)(m,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[ei.packetsPerSecond.toFixed(1)," pps"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Packets/Second"})]})}),(0,a.jsx)(x,{className:"bg-white border-gray-200",children:(0,a.jsxs)(m,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[ei.duration.toFixed(1),"s"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Duration"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsxs)(g,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(h,{children:"Force Data (N)"}),(0,a.jsx)(u,{variant:"outline",size:"sm",onClick:()=>eu({}),disabled:!ed.startIndex&&!ed.endIndex,children:"Reset Zoom"})]}),(0,a.jsx)(m,{className:"p-2",children:(0,a.jsx)(R,{config:eI,className:"h-[400px] w-full",children:(0,a.jsx)(v.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:eo,margin:{top:10,right:10,left:10,bottom:50},children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,a.jsx)(j.K,{dataKey:"time",tick:!1,axisLine:!1,domain:["dataMin","dataMax"],type:"category"}),(0,a.jsx)(w.B,{tick:{fontSize:10},width:60}),(0,a.jsx)(E,{content:(0,a.jsx)(Z,{})}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"force",stroke:"var(--color-force)",strokeWidth:2,dot:!1,isAnimationActive:!1}),(0,a.jsx)(D.B,{dataKey:"time",height:30,stroke:"var(--color-force)",startIndex:ed.startIndex,endIndex:ed.endIndex,onChange:e=>{e&&eu({startIndex:e.startIndex,endIndex:e.endIndex})}})]})})})})]}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsxs)(g,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(h,{children:"Acceleration Data (m/s\xb2)"}),(0,a.jsx)(u,{variant:"outline",size:"sm",onClick:()=>eg({}),disabled:!ex.startIndex&&!ex.endIndex,children:"Reset Zoom"})]}),(0,a.jsx)(m,{className:"p-2",children:(0,a.jsx)(R,{config:eI,className:"h-[400px] w-full",children:(0,a.jsx)(v.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:eo,margin:{top:10,right:10,left:10,bottom:50},children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,a.jsx)(j.K,{dataKey:"time",tick:!1,axisLine:!1,domain:["dataMin","dataMax"],type:"category"}),(0,a.jsx)(w.B,{tick:{fontSize:10},width:60}),(0,a.jsx)(E,{content:(0,a.jsx)(Z,{})}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"accelX",stroke:"var(--color-accelX)",strokeWidth:2,dot:!1,name:"Accel X",isAnimationActive:!1}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"accelY",stroke:"var(--color-accelY)",strokeWidth:2,dot:!1,name:"Accel Y",isAnimationActive:!1}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"accelZ",stroke:"var(--color-accelZ)",strokeWidth:2,dot:!1,name:"Accel Z",isAnimationActive:!1}),(0,a.jsx)(D.B,{dataKey:"time",height:30,stroke:"var(--color-accelX)",startIndex:ex.startIndex,endIndex:ex.endIndex,onChange:e=>{e&&eg({startIndex:e.startIndex,endIndex:e.endIndex})}})]})})})})]}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsxs)(g,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(h,{children:"Gyroscope Data (\xb0/s)"}),(0,a.jsx)(u,{variant:"outline",size:"sm",onClick:()=>em({}),disabled:!eh.startIndex&&!eh.endIndex,children:"Reset Zoom"})]}),(0,a.jsx)(m,{className:"p-2",children:(0,a.jsx)(R,{config:eI,className:"h-[400px] w-full",children:(0,a.jsx)(v.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:eo,margin:{top:10,right:10,left:10,bottom:50},children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,a.jsx)(j.K,{dataKey:"time",tick:!1,axisLine:!1,domain:["dataMin","dataMax"],type:"category"}),(0,a.jsx)(w.B,{tick:{fontSize:10},width:60}),(0,a.jsx)(E,{content:(0,a.jsx)(Z,{})}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"gyroX",stroke:"var(--color-gyroX)",strokeWidth:2,dot:!1,name:"Gyro X",isAnimationActive:!1}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"gyroY",stroke:"var(--color-gyroY)",strokeWidth:2,dot:!1,name:"Gyro Y",isAnimationActive:!1}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"gyroZ",stroke:"var(--color-gyroZ)",strokeWidth:2,dot:!1,name:"Gyro Z",isAnimationActive:!1}),(0,a.jsx)(D.B,{dataKey:"time",height:30,stroke:"var(--color-gyroX)",startIndex:eh.startIndex,endIndex:eh.endIndex,onChange:e=>{e&&em({startIndex:e.startIndex,endIndex:e.endIndex})}})]})})})})]}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsxs)(g,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(h,{children:"Power Data (W)"}),(0,a.jsx)(u,{variant:"outline",size:"sm",onClick:()=>ep({}),disabled:!ef.startIndex&&!ef.endIndex,children:"Reset Zoom"})]}),(0,a.jsx)(m,{className:"p-2",children:(0,a.jsx)(R,{config:eI,className:"h-[400px] w-full",children:(0,a.jsx)(v.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:eo,margin:{top:10,right:10,left:10,bottom:50},children:[(0,a.jsx)(b.q,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,a.jsx)(j.K,{dataKey:"time",tick:!1,axisLine:!1,domain:["dataMin","dataMax"],type:"category"}),(0,a.jsx)(w.B,{tick:{fontSize:10},width:60}),(0,a.jsx)(E,{content:(0,a.jsx)(Z,{})}),(0,a.jsx)(N.x,{type:"monotone",dataKey:"power",stroke:"var(--color-power)",strokeWidth:2,dot:!1,isAnimationActive:!1}),(0,a.jsx)(D.B,{dataKey:"time",height:30,stroke:"var(--color-power)",startIndex:ef.startIndex,endIndex:ef.endIndex,onChange:e=>{e&&ep({startIndex:e.startIndex,endIndex:e.endIndex})}})]})})})})]})]}),(0,a.jsxs)(x,{className:"bg-white border-gray-200",children:[(0,a.jsx)(g,{children:(0,a.jsx)(h,{children:"Chart Controls"})}),(0,a.jsx)(m,{className:"flex gap-2",children:(0,a.jsx)(u,{variant:"outline",onClick:()=>{eu({}),eg({}),em({}),ep({})},disabled:!ed.startIndex&&!ex.startIndex&&!eh.startIndex&&!ef.startIndex,children:"Reset All Zoom"})})]})]})]})}H.displayName=z.f.displayName}},function(e){e.O(0,[677,971,117,744],function(){return e(e.s=1764)}),_N_E=e.O()}]);